<!DOCTYPE html>
<html lang="it" data-mode="totem-wrapper">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Re Long • Totem Demo (Hub Ufficiale) + Animazioni</title>
  <meta name="theme-color" content="#0a0a0a" />
  <style>
    *{box-sizing:border-box;margin:0;padding:0;-webkit-font-smoothing:antialiased}
    :root{
      --stroke:rgba(255,255,255,.1);
      --tile:rgba(10,200,255,.28);
      --ok:#25D366;
      --fx:rgba(10,200,255,.35);
    }
    html,body{height:100%;background:#000}
    body{font-family:system-ui,-apple-system,BlinkMacSystemFont,"Inter",Roboto,sans-serif;color:#fff;overflow:hidden}
    .wrap{height:100dvh;display:grid;grid-template-rows:auto 1fr auto}

    header{position:sticky;top:0;z-index:5;background:linear-gradient(0deg,transparent,rgba(10,10,15,.7));backdrop-filter:blur(8px);border-bottom:1px solid var(--stroke)}
    .topbar{display:flex;align-items:center;justify-content:space-between;gap:.75rem;padding:.75rem 1rem}
    .brand{display:flex;align-items:center;gap:.6rem}
    .badge{font-size:.8rem;padding:.15rem .5rem;border:1px solid var(--stroke);border-radius:999px;color:#cde}
    .wa{display:inline-flex;align-items:center;gap:.35rem;border:1px solid var(--ok);padding:.3rem .6rem;border-radius:999px}

    .frame{position:relative;height:100%;}
    iframe{position:absolute;inset:0;width:100%;height:100%;border:0;border-top:1px solid var(--stroke)}

    .footer{display:flex;align-items:center;justify-content:space-between;padding:.5rem 1rem;border-top:1px solid var(--stroke);background:linear-gradient(180deg,rgba(6,7,12,.6),rgba(6,7,12,.95));backdrop-filter:blur(8px)}
    .hint{font-size:.9rem;color:#cbd5e1}
    .pill{border:1px solid var(--tile);padding:.25rem .55rem;border-radius:999px}
    .controls{display:flex;gap:.5rem;align-items:center}
    .btn{background:transparent;border:1px solid var(--stroke);color:#fff;border-radius:12px;padding:.45rem .7rem;cursor:pointer}
    .btn:hover{box-shadow:0 0 0 1px var(--tile) inset}

    /* --- FX Overlay transizioni --- */
    .fx{
      position:absolute;inset:0;pointer-events:none;z-index:3;
      display:grid;grid-template-rows:1fr auto auto 1fr;justify-items:center;align-items:center;
      opacity:0;transform:scale(1.02);
      background:radial-gradient(80% 50% at 50% 30%, rgba(0,0,0,.35) 0%, rgba(0,0,0,.75) 60%, rgba(0,0,0,.9) 100%);
      transition:opacity .5s ease, transform .5s ease;
    }
    .fx.show{opacity:1;transform:scale(1.0)}
    .fxTitle{
      font-size:1.25rem;letter-spacing:.06em;
      padding:.5rem .9rem;border:1px solid var(--tile);border-radius:14px;
      background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
      box-shadow:0 0 24px rgba(10,200,255,.22), inset 0 0 0 1px rgba(10,200,255,.2)
    }
    .fxSub{color:#bfe9ff;font-size:.95rem;margin-top:.4rem}
    .progress{width:min(560px,80%);height:8px;border-radius:999px;border:1px solid var(--tile);background:rgba(255,255,255,.06);overflow:hidden}
    .bar{width:0%;height:100%;background:linear-gradient(90deg, rgba(10,200,255,.8), rgba(124,200,255,.8));animation:load 1.8s ease-in-out infinite}
    @keyframes load{0%{width:0%}50%{width:75%}100%{width:100%}}
    .fxLogo{
      width:72px;height:72px;border-radius:18px;border:1px solid var(--tile);
      display:grid;place-items:center;
      background:linear-gradient(180deg, rgba(10,200,255,.16), rgba(10,200,255,.06));
      box-shadow:0 10px 30px rgba(0,0,0,.45), 0 0 0 2px rgba(10,200,255,.12) inset;
      transform:scale(1);animation:kb 3s ease-in-out infinite alternate
    }
    @keyframes kb{from{transform:scale(1)}to{transform:scale(1.05)}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="topbar">
        <div class="brand">
          <svg width="26" height="26" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="url(#g)" stroke-width="2"/><defs><linearGradient id="g" x1="0" x2="24" y1="0" y2="24"><stop stop-color="#0ac8ff"/><stop offset="1" stop-color="#7cf"/></linearGradient></defs></svg>
          <strong>Re Long</strong>
          <span class="badge">Totem Demo • Hub ufficiale</span>
        </div>
        <span class="wa">WhatsApp <strong>08119578844</strong></span>
      </div>
    </header>

    <main class="frame">
      <iframe id="hub" title="Re Long Hub" allow="autoplay; clipboard-write"
              src="https://alessandroiascone.github.io/relong-nfc/index.html"></iframe>

      <div class="fx" id="fx">
        <div></div>
        <div class="fxLogo">
          <svg width="36" height="36" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="10" stroke="url(#g2)" stroke-width="2"/>
            <defs><linearGradient id="g2" x1="0" x2="24" y1="0" y2="24"><stop stop-color="#0ac8ff"/><stop offset="1" stop-color="#7cf"/></linearGradient></defs>
          </svg>
        </div>
        <div>
          <div class="fxTitle" id="fxTitle">Caricamento…</div>
          <div class="fxSub" id="fxSub">Re Long • Caricamento sezione…</div>
        </div>
        <div class="progress"><div class="bar" id="bar"></div></div>
      </div>
    </main>

    <footer class="footer">
      <div class="hint" id="hint">Demo automatica attiva • muovi mouse/clicca per interrompere</div>
      <div class="controls">
        <button class="btn" id="prev">◀︎</button>
        <span class="pill" id="label">index</span>
        <button class="btn" id="next">▶︎</button>
      </div>
    </footer>
  </div>

<script>
  // ========= CONFIG =========
  const BASE = 'https://alessandroiascone.github.io/relong-nfc/';

  // RIMOSSA la pagina 404; demo più lenta; include tutte le sezioni che mi hai dato.
  const SECTIONS = [
    'index.html',
    'catalogo-smartphone-reale-v3.html',
    'Business+Energy2.html',
    'assistenza.html',
    'contattaci'
  ];

  // ========= STATO =========
  const iframe = document.getElementById('hub');
  const label = document.getElementById('label');
  const fx = document.getElementById('fx');
  const fxTitle = document.getElementById('fxTitle');
  let idx = 0, demo = true, rotTimer = null, idleTimer = null, hideTimer = null;

  function humanize(path){
    return path.replace('.html','').replace('.htm','').replace(/-/g,' ').replace(/\+/g,' ')
               .replace(/\b\\w/g, m => m.toUpperCase());
  }

  function showOverlay(name){
    fxTitle.textContent = name;
    fx.classList.add('show');
    clearTimeout(hideTimer);
  }
  function hideOverlay(){ fx.classList.remove('show') }

  function go(i){
    idx = (i + SECTIONS.length) % SECTIONS.length;
    const path = SECTIONS[idx];
    const title = humanize(path);
    label.textContent = title;

    showOverlay(title);
    iframe.src = BASE + path;
    // Fallback chiusura overlay se load non arriva
    hideTimer = setTimeout(hideOverlay, 4000);
  }

  // Chiudi overlay al load reale
  iframe.addEventListener('load', hideOverlay);

  function next(){ go(idx+1) }
  function prev(){ go(idx-1) }

  document.getElementById('next').addEventListener('click', ()=>{ stopDemo(); next() });
  document.getElementById('prev').addEventListener('click', ()=>{ stopDemo(); prev() });

  // ========= DEMO MODE =========
  function startDemo(){
    clearInterval(rotTimer);
    rotTimer = setInterval(next, 20000); // 20s per sezione (più lento)
  }
  function stopDemo(){
    if (!demo) return;
    demo = false;
    document.getElementById('hint').textContent = 'Demo disattivata';
    clearInterval(rotTimer);
  }
  function resetIdle(){
    if(!demo) return;
    clearTimeout(idleTimer);
    idleTimer = setTimeout(startDemo, 45000); // parte dopo 45s
  }

  ['click','mousemove','keydown','touchstart'].forEach(ev=>window.addEventListener(ev, stopDemo));

  // Avvio
  go(0);
  resetIdle();
</script>
</body>
</html>
