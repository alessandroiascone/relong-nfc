<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Re Long | Simulatore Energia (Energia inclusa)</title>
  <meta name="theme-color" content="#0a0a0a" />
  <style>
    *{box-sizing:border-box;margin:0;padding:0;-webkit-font-smoothing:antialiased}
    :root{
      --bg1:#0a0a0a; --bg2:#000;
      --card:rgba(20,20,20,.92);
      --stroke:rgba(255,255,255,.09);
      --muted:rgba(255,255,255,.68);
      --brand1:#ff3b1a; --brand2:#ff7b00; --brand3:#ffd400;
      --win1:#ff2d2d; --win2:#ff6a00;
    }
    body{
      font-family:system-ui,-apple-system,Inter,Roboto,Arial,sans-serif;
      background:
        radial-gradient(1200px 800px at 10% 10%, #151515 0%, transparent 60%),
        radial-gradient(1000px 600px at 90% 20%, #181818 0%, transparent 60%),
        linear-gradient(180deg,var(--bg1),var(--bg2));
      color:#fff; min-height:100dvh;
      display:flex; justify-content:center; padding:24px;
    }
    .wrap{width:min(980px,100%); display:grid; gap:18px}
    .title{
      display:flex; justify-content:space-between; padding:18px 20px; align-items:center;
      border:1px solid var(--stroke); border-radius:20px;
      background:linear-gradient(135deg, rgba(255,200,0,.08), rgba(255,255,255,.03));
      box-shadow:0 10px 30px rgba(0,0,0,.45);
    }
    .title h1{font-size:20px}
    .badge{
      padding:8px 12px; border-radius:999px; font-size:12px; font-weight:700;
      background:linear-gradient(90deg,var(--brand1),var(--brand2),var(--brand3));
      -webkit-background-clip:text; color:transparent;
      border:1px solid var(--stroke);
    }

    .card{
      border:1px solid var(--stroke); border-radius:20px; padding:20px;
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.0)), var(--card);
      box-shadow:0 12px 32px rgba(0,0,0,.5);
    }
    .row{display:grid; grid-template-columns:1fr 1fr; gap:12px}
    @media(max-width:720px){ .row{grid-template-columns:1fr} }
    label{font-size:13px;color:var(--muted);margin-bottom:6px;display:block}
    select{
      width:100%; padding:14px; border-radius:14px;
      background:#101010; color:#fff; border:1px solid var(--stroke);
    }

    /* Banner */
    .banner{
      display:none; margin-top:14px; margin-bottom:8px;
      padding:14px; border-radius:14px; font-weight:800;
      text-shadow:0 1px 0 rgba(0,0,0,.4);
      background:linear-gradient(90deg,var(--win1),var(--win2));
    }
    .banner.show{display:block}

    /* Prezzo */
    .price{
      display:none; margin-top:10px;
      padding:10px 14px; border-radius:14px; font-weight:900; font-size:18px;
      border:1px solid rgba(255,255,255,.14);
      background:linear-gradient(90deg,#ffd400,#ff7b00);
      color:#000; box-shadow:0 8px 18px rgba(255,150,0,.25);
      width:max-content;
    }
    .price.show{display:inline-block}

    /* LAMPADINA 3D CENTRATA */
    .lamp3d{
      position:relative;
      display:flex; align-items:center; justify-content:center;
      margin-top:16px; padding:24px; min-height:180px;
      border:1px dashed var(--stroke); border-radius:16px;
      background:radial-gradient(120% 120% at 50% 0%, rgba(255,200,0,.05), transparent 60%);
      overflow:hidden;
    }
    /* raggi circolari */
    .rays{
      position:absolute; width:360px; height:360px; border-radius:50%;
      background:
        conic-gradient(from 0deg,
          rgba(255,210,80,.0) 0deg, rgba(255,210,80,.36) 8deg, rgba(255,210,80,.0) 16deg,
          rgba(255,210,80,.0) 36deg, rgba(255,210,80,.28) 44deg, rgba(255,210,80,.0) 52deg,
          rgba(255,210,80,.0) 72deg, rgba(255,210,80,.22) 80deg, rgba(255,210,80,.0) 88deg,
          rgba(255,210,80,.0) 108deg, rgba(255,210,80,.30) 116deg, rgba(255,210,80,.0) 124deg,
          rgba(255,210,80,.0) 144deg, rgba(255,210,80,.28) 152deg, rgba(255,210,80,.0) 160deg,
          rgba(255,210,80,.0) 180deg, rgba(255,210,80,.30) 188deg, rgba(255,210,80,.0) 196deg,
          rgba(255,210,80,.0) 216deg, rgba(255,210,80,.28) 224deg, rgba(255,210,80,.0) 232deg,
          rgba(255,210,80,.0) 252deg, rgba(255,210,80,.22) 260deg, rgba(255,210,80,.0) 268deg,
          rgba(255,210,80,.0) 288deg, rgba(255,210,80,.30) 296deg, rgba(255,210,80,.0) 304deg,
          rgba(255,210,80,.0) 324deg, rgba(255,210,80,.28) 332deg, rgba(255,210,80,.0) 340deg
        );
      filter:blur(10px); opacity:0; transform:scale(.9);
      transition:opacity .35s ease, transform .35s ease;
      pointer-events:none;
    }
    .lamp3d.on .rays{opacity:.8; transform:scale(1); animation:spin 16s linear infinite}
    .lamp3d.super .rays{opacity:1; transform:scale(1.05); animation:spinFast 10s linear infinite}

    .bulb{
      position:relative;
      width:100px; height:100px; border-radius:50%;
      background:radial-gradient(circle at 35% 30%, #fff 0%, #ffe08a 40%, #ffcf4a 60%, #ffb300 85%, #aa7000 100%);
      box-shadow:0 0 14px rgba(255,180,0,.55), 0 0 28px rgba(255,170,0,.22);
      transition:transform .25s ease, filter .25s ease, box-shadow .25s ease, opacity .25s ease;
      isolation:isolate; transform:translateZ(0);
    }
    .bulb.off{
      background:radial-gradient(circle at 35% 30%, #555 0%, #444 40%, #2b2b2b 80%);
      box-shadow:none; filter:saturate(.35) brightness(.68); opacity:.85; transform:scale(.98);
    }
    /* Alone glow morbido */
    .bulb.glow::after{
      content:""; position:absolute; inset:-36px; border-radius:50%;
      background:radial-gradient(circle, rgba(255,230,170,.55) 0%, rgba(255,210,110,.35) 26%, rgba(255,195,70,.18) 48%, rgba(255,170,0,.1) 66%, transparent 76%);
      filter:blur(6px); opacity:.95; z-index:-1; animation:haloSoft 4s ease-in-out infinite;
    }
    .bulb.glow::before{
      content:""; position:absolute; inset:-12px; border-radius:50%;
      background:radial-gradient(circle, rgba(255,255,220,.35) 0%, rgba(255,220,120,.18) 40%, transparent 70%);
      filter:blur(3px); opacity:.8; z-index:-1;
    }

    /* Scintille âš¡ (solo SUPER) */
    .sparks{
      position:absolute; inset:0; pointer-events:none;
    }
    .sparks span{
      position:absolute; font-size:22px; opacity:0; transform:scale(.6);
      filter:drop-shadow(0 0 6px rgba(255,210,0,.6));
    }
    .sparks span:nth-child(1){ left:20%; top:24% }
    .sparks span:nth-child(2){ right:18%; top:30% }
    .sparks span:nth-child(3){ left:28%; bottom:20% }
    .lamp3d.super .sparks span{
      animation:sparkUp 1.8s ease-in-out infinite;
    }
    .lamp3d.super .sparks span:nth-child(2){ animation-delay:.25s }
    .lamp3d.super .sparks span:nth-child(3){ animation-delay:.5s }

    /* Click glow leggero quando passa OFF->ON */
    .bulb.flash{ animation:flashGlow .35s ease-out }
    @keyframes flashGlow{
      0%{ box-shadow:0 0 22px rgba(255,200,0,.65), 0 0 44px rgba(255,190,0,.30); transform:scale(1.00) }
      50%{ box-shadow:0 0 38px rgba(255,210,0,.85), 0 0 72px rgba(255,200,0,.45); transform:scale(1.04) }
      100%{ box-shadow:0 0 14px rgba(255,180,0,.55), 0 0 28px rgba(255,170,0,.22); transform:scale(1.00) }
    }
    /* Flash piÃ¹ marcato per SUPER o ON->SUPER */
    .bulb.flashStrong{ animation:flashStrong .45s ease-out }
    @keyframes flashStrong{
      0%{ box-shadow:0 0 30px rgba(255,210,0,.85), 0 0 80px rgba(255,200,0,.5); transform:scale(1.02) }
      60%{ box-shadow:0 0 60px rgba(255,220,0,1), 0 0 120px rgba(255,215,0,.65); transform:scale(1.07) }
      100%{ box-shadow:0 0 18px rgba(255,185,0,.6), 0 0 34px rgba(255,175,0,.28); transform:scale(1.00) }
    }

    @keyframes haloSoft{
      0%{transform:scale(.98);opacity:.92}
      50%{transform:scale(1.03);opacity:1}
      100%{transform:scale(.98);opacity:.92}
    }
    @keyframes spin{ 0%{transform:rotate(0)} 100%{transform:rotate(360deg)} }
    @keyframes spinFast{ 0%{transform:rotate(0)} 100%{transform:rotate(360deg)} }
    @keyframes sparkUp{
      0%{ opacity:0; transform:translateY(8px) scale(.6) rotate(-8deg) }
      35%{ opacity:1; transform:translateY(-4px) scale(1) rotate(0deg) }
      100%{ opacity:0; transform:translateY(-14px) scale(1.05) rotate(6deg) }
    }

    /* Bottoni: centrati */
    .btns{display:flex; gap:10px; margin-top:18px; flex-wrap:wrap; justify-content:center}
    .btn{
      padding:12px 18px; border-radius:14px; font-weight:700;
      border:none; cursor:pointer; text-decoration:none;
      background:linear-gradient(90deg,var(--brand1),var(--brand2),var(--brand3));
      color:#000; box-shadow:0 8px 20px rgba(255,150,0,.35);
    }
  </style>
</head>
<body>
  <main class="wrap">
    <header class="title">
      <h1>Simulatore Sconti â€¢ Re Long</h1>
      <span class="badge">Business â€¢ Energia</span>
    </header>

    <section class="card">
      <h2 style="font-size:16px;margin-bottom:10px">Imposta la tua situazione</h2>

      <div class="row">
        <div>
          <label>Diventa cliente Vodafone Business (Mobile)</label>
          <select id="selMobile"><option value="no">No</option><option value="si">SÃ¬</option></select>
        </div>
        <div>
          <label>Diventa cliente Vodafone Business (Fisso)</label>
          <select id="selFisso"><option value="no">No</option><option value="si">SÃ¬</option></select>
        </div>
      </div>

      <div class="row" style="margin-top:10px">
        <div>
          <label>Vodafone Business (Energia)</label>
          <select id="selEnergia" disabled>
            <option value="si" selected>SÃ¬ (inclusa per ottenere lo sconto)</option>
          </select>
        </div>
      </div>

      <div id="price" class="price"></div>
      <div id="banner" class="banner"></div>

      <!-- Lampadina 3D centrata con raggi e scintille -->
      <div id="lampBox" class="lamp3d" aria-live="polite">
        <div id="rays" class="rays" aria-hidden="true"></div>
        <div id="bulb" class="bulb off" role="img" aria-label="Lampadina"></div>
        <div class="sparks" aria-hidden="true">
          <span>âš¡</span><span>âš¡</span><span>âš¡</span>
        </div>
      </div>

      <div class="btns">
        <a class="btn" id="btnWA" target="_blank" rel="noopener">Invia su WhatsApp</a>
      </div>
    </section>
  </main>

  <script>
    (function(){
      const selMobile  = document.getElementById('selMobile');
      const selFisso   = document.getElementById('selFisso');

      const price  = document.getElementById('price');
      const banner = document.getElementById('banner');

      const lampBox= document.getElementById('lampBox');
      const bulb   = document.getElementById('bulb');

      const btnWA  = document.getElementById('btnWA');
      const WA_NUMBER = "3908119578844";

      // 0=off, 1=on (uno solo), 2=super (entrambi)
      let prevLevel = 0;

      function setPrice(text){
        if(text){
          price.textContent = text;
          price.classList.add('show');
        } else {
          price.textContent = '';
          price.classList.remove('show');
        }
      }

      function setBanner(html){
        if(!html){
          banner.classList.remove('show');
          banner.innerHTML='';
          return;
        }
        banner.classList.add('show');
        banner.innerHTML = html;
      }

      function setLamp(level){
        // level: 0 off, 1 on, 2 super
        lampBox.classList.toggle('on', level >= 1);
        lampBox.classList.toggle('super', level === 2);
        bulb.classList.toggle('off', level === 0);
        bulb.classList.toggle('glow', level >= 1);

        // gestisci flash:
        bulb.classList.remove('flash','flashStrong');
        void bulb.offsetWidth; // reflow per ri-avviare animazioni
        if (prevLevel === 0 && level >= 1) {
          // OFF -> ON/SUPER
          bulb.classList.add(level === 2 ? 'flashStrong' : 'flash');
        } else if (prevLevel === 1 && level === 2) {
          // ON -> SUPER
          bulb.classList.add('flashStrong');
        }
        prevLevel = level;
      }

      function compute(){
        const m = selMobile.value === 'si';
        const f = selFisso.value === 'si';

        let level = 0;

        if (m && !f) {
          setPrice('â‚¬15/mese');
          setBanner('ðŸŽ‰ <b>Hai acceso la tua energia!</b> Sconto di <u>â‚¬180/anno</u>.');
          level = 1;
        } else if (f && !m) {
          setPrice('â‚¬28/mese');
          setBanner('ðŸŽ‰ <b>Hai acceso la tua energia!</b> Sconto di <u>â‚¬180/anno</u>.');
          level = 1;
        } else if (m && f) {
          setPrice('â‚¬30/mese');
          setBanner('ðŸŽ‰ <b>Hai acceso la tua energia!</b> Super sconto di <u>â‚¬260/anno</u>.');
          level = 2; // SUPER EFFECT
        } else {
          setPrice('');
          setBanner('');
          level = 0;
        }

        setLamp(level);

        const msg =
`Simulazione Re Long
Mobile: ${m ? 'si' : 'no'}
Fisso: ${f ? 'si' : 'no'}
Energia: si
Prezzo: ${price.textContent || '-'}
Banner: ${banner.textContent || '-'}`;

        btnWA.href = "https://wa.me/" + WA_NUMBER + "?text=" + encodeURIComponent(msg);
      }

      [selMobile, selFisso].forEach(el => el.addEventListener('change', compute));
      compute();
    })();
  </script>
</body>
</html>
