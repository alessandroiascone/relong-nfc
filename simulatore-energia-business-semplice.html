<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Re Long | Simulatore Energia (Energia inclusa)</title>
  <meta name="theme-color" content="#0a0a0a" />
  <style>
    *{box-sizing:border-box;margin:0;padding:0;-webkit-font-smoothing:antialiased}
    :root{
      --bg1:#0a0a0a; --bg2:#000;
      --card:rgba(20,20,20,.92);
      --stroke:rgba(255,255,255,.09);
      --muted:rgba(255,255,255,.68);
      --brand1:#ff3b1a; --brand2:#ff7b00; --brand3:#ffd400;
      --win1:#ff2d2d; --win2:#ff6a00;
    }
    body{
      font-family:system-ui,-apple-system,Inter,Roboto,Arial,sans-serif;
      background:
        radial-gradient(1200px 800px at 10% 10%, #151515 0%, transparent 60%),
        radial-gradient(1000px 600px at 90% 20%, #181818 0%, transparent 60%),
        linear-gradient(180deg,var(--bg1),var(--bg2));
      color:#fff; min-height:100dvh;
      display:flex; justify-content:center; padding:24px;
    }
    .wrap{width:min(980px,100%); display:grid; gap:18px}
    .title{
      display:flex; justify-content:space-between; padding:18px 20px; align-items:center;
      border:1px solid var(--stroke); border-radius:20px;
      background:linear-gradient(135deg, rgba(255,200,0,.08), rgba(255,255,255,.03));
      box-shadow:0 10px 30px rgba(0,0,0,.45);
    }
    .title h1{font-size:20px}
    .badge{
      padding:8px 12px; border-radius:999px; font-size:12px; font-weight:700;
      background:linear-gradient(90deg,var(--brand1),var(--brand2),var(--brand3));
      -webkit-background-clip:text; color:transparent;
      border:1px solid var(--stroke);
    }

    .card{
      border:1px solid var(--stroke); border-radius:20px; padding:20px;
      background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.0)), var(--card);
      box-shadow:0 12px 32px rgba(0,0,0,.5);
    }
    .row{display:grid; grid-template-columns:1fr 1fr; gap:12px}
    @media(max-width:720px){ .row{grid-template-columns:1fr} }
    label{font-size:13px;color:var(--muted);margin-bottom:6px;display:block}
    select{
      width:100%; padding:14px; border-radius:14px;
      background:#101010; color:#fff; border:1px solid var(--stroke);
    }

    /* Banner */
    .banner{
      display:none; margin-top:14px; margin-bottom:8px;
      padding:14px; border-radius:14px; font-weight:800;
      text-shadow:0 1px 0 rgba(0,0,0,.4);
      background:linear-gradient(90deg,var(--win1),var(--win2));
    }
    .banner.show{display:block}

    /* Prezzo */
    .price{
      display:none; margin-top:10px;
      padding:10px 14px; border-radius:14px; font-weight:900; font-size:18px;
      border:1px solid rgba(255,255,255,.14);
      background:linear-gradient(90deg,#ffd400,#ff7b00);
      color:#000; box-shadow:0 8px 18px rgba(255,150,0,.25);
      width:max-content;
    }
    .price.show{display:inline-block}

    /* LAMPADINA 3D CENTRATA */
    .lamp3d{
      position:relative;
      display:flex; align-items:center; justify-content:center;
      margin-top:16px; padding:24px; min-height:160px;
      border:1px dashed var(--stroke); border-radius:16px;
      background:radial-gradient(120% 120% at 50% 0%, rgba(255,200,0,.05), transparent 60%);
      overflow:hidden;
    }
    .bulb{
      position:relative;
      width:96px; height:96px; border-radius:50%;
      background:radial-gradient(circle at 35% 30%, #fff 0%, #ffe08a 40%, #ffcf4a 60%, #ffb300 85%, #aa7000 100%);
      box-shadow:0 0 14px rgba(255,180,0,.55), 0 0 28px rgba(255,170,0,.22);
      transition:transform .25s ease, filter .25s ease, box-shadow .25s ease, opacity .25s ease;
      isolation:isolate;
      transform:translateZ(0);
    }
    .bulb.off{
      background:radial-gradient(circle at 35% 30%, #555 0%, #444 40%, #2b2b2b 80%);
      box-shadow:none; filter:saturate(.35) brightness(.68); opacity:.85;
      transform:scale(.98);
    }
    /* Alone morbido premium */
    .bulb.glow::after{
      content:""; position:absolute; inset:-34px; border-radius:50%;
      background:radial-gradient(circle, rgba(255,230,170,.55) 0%, rgba(255,210,110,.35) 26%, rgba(255,195,70,.18) 48%, rgba(255,170,0,.1) 66%, transparent 76%);
      filter:blur(6px); opacity:.95; z-index:-1; animation:haloSoft 4s ease-in-out infinite;
    }
    .bulb.glow::before{
      content:""; position:absolute; inset:-12px; border-radius:50%;
      background:radial-gradient(circle, rgba(255,255,220,.35) 0%, rgba(255,220,120,.18) 40%, transparent 70%);
      filter:blur(3px); opacity:.8; z-index:-1;
    }

    /* CLICK GLOW EFFECT â€” leggero (A) */
    .bulb.flash{
      animation:flashGlow .35s ease-out;
    }
    @keyframes flashGlow{
      0%{
        box-shadow:0 0 22px rgba(255,200,0,.65), 0 0 44px rgba(255,190,0,.30);
        transform:scale(1.00);
      }
      50%{
        box-shadow:0 0 38px rgba(255,210,0,.85), 0 0 72px rgba(255,200,0,.45);
        transform:scale(1.04);
      }
      100%{
        box-shadow:0 0 14px rgba(255,180,0,.55), 0 0 28px rgba(255,170,0,.22);
        transform:scale(1.00);
      }
    }

    @keyframes haloSoft{
      0%{transform:scale(.98);opacity:.92}
      50%{transform:scale(1.03);opacity:1}
      100%{transform:scale(.98);opacity:.92}
    }

    /* Bottoni */
    .btns{display:flex; gap:10px; margin-top:18px; flex-wrap:wrap}
    .btn{
      padding:12px 18px; border-radius:14px; font-weight:700;
      border:none; cursor:pointer; text-decoration:none;
      background:linear-gradient(90deg,var(--brand1),var(--brand2),var(--brand3));
      color:#000; box-shadow:0 8px 20px rgba(255,150,0,.35);
    }
  </style>
</head>
<body>
  <main class="wrap">
    <header class="title">
      <h1>Simulatore Sconti â€¢ Re Long</h1>
      <span class="badge">Business â€¢ Energia</span>
    </header>

    <section class="card">
      <h2 style="font-size:16px;margin-bottom:10px">Imposta la tua situazione</h2>

      <div class="row">
        <div>
          <label>Diventa cliente Vodafone Business (Mobile)</label>
          <select id="selMobile"><option value="no">No</option><option value="si">SÃ¬</option></select>
        </div>
        <div>
          <label>Diventa cliente Vodafone Business (Fisso)</label>
          <select id="selFisso"><option value="no">No</option><option value="si">SÃ¬</option></select>
        </div>
      </div>

      <div class="row" style="margin-top:10px">
        <div>
          <label>Vodafone Business (Energia)</label>
          <select id="selEnergia" disabled>
            <option value="si" selected>SÃ¬ (inclusa per ottenere lo sconto)</option>
          </select>
        </div>
      </div>

      <div id="price" class="price"></div>
      <div id="banner" class="banner"></div>

      <!-- Lampadina 3D centrata -->
      <div id="lampBox" class="lamp3d" aria-live="polite">
        <div id="bulb" class="bulb off" role="img" aria-label="Lampadina"></div>
      </div>

      <div class="btns">
        <a class="btn" id="btnWA" target="_blank" rel="noopener">Invia su WhatsApp</a>
      </div>
    </section>
  </main>

  <script>
    (function(){
      const selMobile  = document.getElementById('selMobile');
      const selFisso   = document.getElementById('selFisso');

      const price  = document.getElementById('price');
      const banner = document.getElementById('banner');

      const bulb   = document.getElementById('bulb');
      const btnWA  = document.getElementById('btnWA');

      const WA_NUMBER = "3908119578844";

      let wasOn = false; // per applicare il flash solo nei passaggi OFF -> ON

      function setPrice(text){
        if(text){
          price.textContent = text;
          price.classList.add('show');
        } else {
          price.textContent = '';
          price.classList.remove('show');
        }
      }

      function setBanner(html){
        if(!html){
          banner.classList.remove('show');
          banner.innerHTML='';
          return;
        }
        banner.classList.add('show');
        banner.innerHTML = html;
      }

      function setLamp(on){
        const goingOn = on && !wasOn;
        bulb.classList.toggle('off', !on);
        bulb.classList.toggle('glow', on);

        // Flash leggero solo quando passa da OFF a ON
        if (goingOn) {
          bulb.classList.remove('flash'); // reset eventuale
          // Reflow per riavviare animazione se ri-selezionano
          // eslint-disable-next-line no-unused-expressions
          void bulb.offsetWidth;
          bulb.classList.add('flash');
          setTimeout(()=>bulb.classList.remove('flash'), 360);
        }

        wasOn = on;
      }

      function compute(){
        const m = selMobile.value;
        const f = selFisso.value;

        setPrice('');
        setBanner('');
        setLamp(false);

        if (m==='si' && f==='no') {
          setPrice('â‚¬15/mese');
          setBanner('ðŸŽ‰ <b>Hai acceso la tua energia!</b> Sconto di <u>â‚¬180/anno</u>.');
          setLamp(true);
        } 
        else if (f==='si' && m==='no') {
          setPrice('â‚¬28/mese');
          setBanner('ðŸŽ‰ <b>Hai acceso la tua energia!</b> Sconto di <u>â‚¬180/anno</u>.');
          setLamp(true);
        }
        else if (f==='si' && m==='si') {
          setPrice('â‚¬30/mese');
          setBanner('ðŸŽ‰ <b>Hai acceso la tua energia!</b> Super sconto di <u>â‚¬260/anno</u>.');
          setLamp(true);
        }

        const msg =
`Simulazione Re Long
Mobile: ${m}
Fisso: ${f}
Energia: si
Prezzo: ${price.textContent || '-'}
Banner: ${banner.textContent || '-'}`;

        btnWA.href = "https://wa.me/" + WA_NUMBER + "?text=" + encodeURIComponent(msg);

        return msg;
      }

      [selMobile, selFisso].forEach(el => el.addEventListener('change', compute));

      // init
      compute();
    })();
  </script>
</body>
</html>
