<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Catalogo Smartphone ‚Äì Re Long Informatica</title>
  <meta name="description" content="Catalogo smartphone Re Long: iPhone, Samsung, Oppo, Honor e altri. Aggiungi al carrello WhatsApp e richiedi preventivo.">
  <meta name="theme-color" content="#0a0a0a">

  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='256' height='256' viewBox='0 0 256 256'%3E%3Crect width='256' height='256' rx='56' fill='%230a0a0a'/%3E%3Cpath d='M60 176l68-96l68 96' fill='none' stroke='%23ff3b1a' stroke-width='20' stroke-linecap='round' stroke-linejoin='round'/%3E%3Ccircle cx='128' cy='96' r='14' fill='%23ff9a1a'/%3E%3C/svg%3E" />

  <!-- Preconnect -->
  <link rel="preconnect" href="https://wa.me">

  <style>
    *{box-sizing:border-box;margin:0;padding:0;-webkit-font-smoothing:antialiased}
    :root{
      --bg1:#0a0a0a;--bg2:#000;
      --brand1:#ff0000;--brand2:#ff7b00;
      --muted:rgba(255,255,255,.72);--muted2:rgba(255,255,255,.5);
      --card:rgba(22,22,22,.94);--stroke:rgba(255,255,255,.08);
      --wa1:#25D366;--wa2:#128C7E;--focus:#ffd166
    }

    body{
      font-family:system-ui,-apple-system,Inter,Roboto,sans-serif;
      background:radial-gradient(circle at 20% 20%,var(--bg1) 0%, var(--bg2) 70%);
      color:#fff; min-height:100vh;
    }

    .wrap{max-width:1100px;margin:0 auto;padding:24px 16px 120px}
    header.head{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:12px;margin-bottom:16px}
    .brand{font-size:20px;font-weight:900;letter-spacing:-.02em}
    .sub{font-size:12px;color:var(--muted)}

    /* Tool bar */
    .toolbar{
      display:flex;flex-wrap:wrap;gap:10px;margin:10px 0 14px;
      align-items:center;justify-content:space-between
    }
    .chips{display:flex;flex-wrap:wrap;gap:8px}
    .chip{
      border:1px solid var(--stroke);background:rgba(255,255,255,.04);
      color:#fff;font-size:12px;padding:8px 12px;border-radius:999px;cursor:pointer
    }
    .chip.active{background:linear-gradient(90deg,var(--brand1),var(--brand2));color:#000;font-weight:900}
    .searchbox{display:flex;gap:8px;align-items:center}
    .searchbox input{
      background:rgba(255,255,255,.04);border:1px solid var(--stroke);color:#fff;
      padding:10px 12px;border-radius:10px;min-width:220px;outline:none
    }

    /* Grid */
    .grid{
      display:grid;gap:14px;
      grid-template-columns: repeat(1, minmax(0,1fr));
    }
    @media(min-width:560px){ .grid{ grid-template-columns: repeat(2, minmax(0,1fr)); } }
    @media(min-width:900px){ .grid{ grid-template-columns: repeat(3, minmax(0,1fr)); } }

    /* Card Prodotto */
    .card{
      position:relative;background:linear-gradient(150deg,var(--card) 0%,rgba(0,0,0,.6) 100%);
      border:1px solid var(--stroke);border-radius:16px;padding:14px;
      box-shadow:0 24px 56px rgba(0,0,0,.85),0 0 60px rgba(255,0,0,.12);
      display:flex;flex-direction:column;gap:10px;overflow:hidden;transition:transform .25s ease, box-shadow .25s ease, border-color .25s ease
    }
    .card:hover{transform:translateY(-3px);box-shadow:0 36px 90px rgba(0,0,0,.9), 0 0 90px rgba(255,59,0,.2);border-color:rgba(255,255,255,.16)}
    .card::before{
      content:""; position:absolute; inset:-40%;
      background:radial-gradient(280px 280px at var(--mx,50%) var(--my,50%), rgba(255,123,0,.18), transparent 60%);
      pointer-events:none; opacity:.0; transition:opacity .2s ease; filter:blur(10px)
    }
    .card:hover::before{opacity:.7}

    .badge{
      position:absolute;top:10px;left:10px;font-size:10px;font-weight:900;
      padding:6px 10px;border-radius:999px;color:#000;
      background:linear-gradient(90deg,#ff0000,#ff7b00);box-shadow:0 8px 18px rgba(255,80,0,.35)
    }

    .imgwrap{
      width:100%;aspect-ratio:1/1;border-radius:12px;
      background:linear-gradient(140deg, #1b1b1b, #0a0a0a);
      border:1px solid rgba(255,255,255,.06);
      display:grid;place-items:center;overflow:hidden
    }
    .imgwrap img{width:100%;height:100%;object-fit:cover;display:block}
    .imgwrap .ph{
      font-weight:900;font-size:28px;letter-spacing:.4px;color:rgba(255,255,255,.5)
    }

    .title{font-weight:900;font-size:16px}
    .meta{display:flex;gap:8px;flex-wrap:wrap;color:var(--muted);font-size:12px}
    .price{font-weight:900;font-size:18px}
    .btns{display:flex;gap:8px;flex-wrap:wrap;margin-top:2px}
    .btn{
      appearance:none;border:0;cursor:pointer;
      padding:10px 12px;border-radius:12px;font-weight:900;font-size:13px;
      background:linear-gradient(90deg,var(--brand1),var(--brand2));color:#000;
      box-shadow:0 14px 24px rgba(255,90,0,.32);text-decoration:none;display:inline-flex;align-items:center;gap:8px
    }
    .btn.ghost{
      background:transparent;color:#fff;border:1px solid rgba(255,255,255,.18);
      box-shadow:none
    }
    .btn.wa{
      background:radial-gradient(circle at 0% 0%, var(--wa1), var(--wa2));
      color:#000; box-shadow:0 14px 24px rgba(18,140,126,.38)
    }

    /* Carrello pill */
    .cart-pill{
      position:fixed;left:50%;bottom:16px;transform:translateX(-50%);
      background:linear-gradient(90deg,var(--brand1),var(--brand2));color:#000;
      font-weight:900;border-radius:999px;padding:10px 14px;box-shadow:0 18px 36px rgba(255,90,0,.35);
      z-index:9999;display:none;align-items:center;gap:10px
    }
    .cart-pill .count{background:#000;color:#fff;border-radius:999px;padding:8px 10px}
    .cart-pill button{
      background:#000;color:#fff;border:0;border-radius:999px;padding:8px 12px;font-weight:900;cursor:pointer
    }

    /* Top actions */
    .top-actions{
      display:flex;gap:8px;flex-wrap:wrap;margin-top:8px;align-items:center
    }
    .back{color:var(--muted);text-decoration:none;border:1px dashed rgba(255,255,255,.16);padding:6px 10px;border-radius:10px}
  </style>
</head>
<body>

  <div class="wrap">
    <header class="head">
      <div>
        <div class="brand">Catalogo Smartphone ‚Äî Re Long Informatica</div>
        <div class="sub">Aggiungi al carrello WhatsApp e inviaci la richiesta con un tap</div>
        <div class="top-actions">
          <a class="back" href="./index.html">‚Üê Torna alla Home</a>
        </div>
      </div>
      <div class="searchbox">
        <input id="q" type="search" placeholder="Cerca modello o brand‚Ä¶" aria-label="Cerca">
      </div>
    </header>

    <div class="toolbar">
      <div class="chips" id="brandChips">
        <!-- popolato da JS -->
      </div>
      <div class="chips" id="sortChips">
        <button class="chip" data-sort="name">Ordina A‚ÜíZ</button>
        <button class="chip" data-sort="price-asc">Prezzo ‚Üë</button>
        <button class="chip" data-sort="price-desc">Prezzo ‚Üì</button>
      </div>
    </div>

    <section class="grid" id="grid" aria-label="Catalogo smartphone">
      <!-- cards generate JS -->
    </section>
  </div>

  <!-- Carrello WhatsApp -->
  <div class="cart-pill" id="cartPill" role="region" aria-label="Carrello WhatsApp">
    <span class="count" id="cartCount">0</span>
    <span id="cartLabel">Carrello WhatsApp</span>
    <button id="cartSend">Invia</button>
    <button id="cartClear">Svuota</button>
  </div>

  <script>
  // ====== Dataset prodotti (modifica qui) ======
  // Aggiungi/edita prodotti cambiando o aggiungendo oggetti in questo array.
  // image: puoi mettere un URL assoluto (es. https://...) o relativo (es. ./img/a56.jpg). Se vuoto => segnaposto.
  const PRODUCTS = [
    { sku:"IP17PM256", name:"iPhone 17 Pro Max 256GB", brand:"Apple",  price:1657.80, image:"" },
    { sku:"IP17AIR128", name:"iPhone 17 Air 128GB",    brand:"Apple",  price:1199.00, image:"" },
    { sku:"SM-A56",     name:"Samsung Galaxy A56 5G",  brand:"Samsung",price:483.80,  image:"" },
    { sku:"SM-ZF7-256", name:"Samsung Galaxy Z Fold 7 256GB", brand:"Samsung", price:1977.00, image:"" },
    { sku:"OP-A5PRO",   name:"OPPO A5 Pro",            brand:"OPPO",   price:255.90,  image:"" },
    // Esempio aggiunta:
    // { sku:"HN-90", name:"Honor 90 256GB", brand:"Honor", price:349.00, image:"./img/honor90.jpg" },
  ];
  </script>

  <script>
  // ====== Utility & Stato ======
  const $ = (sel, root=document)=>root.querySelector(sel);
  const $$= (sel, root=document)=>Array.from(root.querySelectorAll(sel));
  const LS_CART_KEY = 'rl_cart';

  const VIB_TAP = [10];
  const isTouch = window.matchMedia('(pointer: coarse)').matches;
  const canVibrate = 'vibrate' in navigator && !window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  function vibe(pattern){ if(isTouch && canVibrate) navigator.vibrate(pattern); }

  // Carrello
  const Cart = {
    get(){ try{ return JSON.parse(localStorage.getItem(LS_CART_KEY)||'[]'); }catch{return []} },
    set(v){ localStorage.setItem(LS_CART_KEY, JSON.stringify(v)); Cart.updatePill(); },
    add(item){
      const arr = Cart.get();
      arr.push(item);
      Cart.set(arr);
      toast(`Aggiunto al carrello: ${item.name}`);
    },
    clear(){ Cart.set([]); toast('Carrello svuotato'); },
    list(){ return Cart.get(); }
  };

  // Toast semplice
  let toastTimer=null;
  function toast(msg){
    clearTimeout(toastTimer);
    let t = $('.toast');
    if(!t){
      t = document.createElement('div');
      t.className = 'toast';
      document.body.appendChild(t);
    }
    t.textContent = msg;
    t.style.opacity = '1';
    toastTimer = setTimeout(()=> t.style.opacity='0', 1800);
  }

  // Pill del carrello
  const PILL = $('#cartPill'); const CNT = $('#cartCount');
  const BTN_SEND = $('#cartSend'); const BTN_CLEAR = $('#cartClear');
  Cart.updatePill = function(){
    const n = Cart.get().length;
    PILL.style.display = n ? 'flex' : 'none';
    CNT.textContent = String(n);
  };

  BTN_CLEAR.onclick = ()=>{ vibe(VIB_TAP); Cart.clear(); };
  BTN_SEND.onclick = ()=>{
    vibe([12,30,12]);
    const items = Cart.list();
    if(!items.length){ toast('Carrello vuoto'); return; }
    const lines = items.map((x,i)=> `${i+1}) ${x.name} ‚Äî ‚Ç¨${x.price.toFixed(2)} (SKU: ${x.sku})`).join('\n');
    const msg = `Ciao Re Long, vorrei un preventivo per:\n${lines}\nGrazie!`;
    const url = `https://wa.me/3908119578844?text=${encodeURIComponent(msg)}`;
    window.open(url,'_blank');
  };

  // ====== Render prodotti ======
  const GRID = $('#grid');
  function money(v){ return '‚Ç¨ ' + v.toFixed(2).replace('.',','); }

  function render(products){
    GRID.innerHTML = '';
    products.forEach(p=>{
      const card = document.createElement('article');
      card.className = 'card';
      card.setAttribute('data-brand', p.brand);
      card.setAttribute('data-price', String(p.price));
      card.setAttribute('data-name', p.name);
      card.setAttribute('data-sku', p.sku);

      // dinamico spotlight
      card.addEventListener('mousemove', e=>{
        const r = card.getBoundingClientRect();
        card.style.setProperty('--mx', ((e.clientX - r.left) / r.width * 100)+'%');
        card.style.setProperty('--my', ((e.clientY - r.top) / r.height * 100)+'%');
      });

      const badge = `<div class="badge">${p.brand}</div>`;
      const img = p.image
        ? `<img src="${p.image}" alt="${p.name}">`
        : `<div class="ph">${(p.brand?.[0]||'')}${(p.name?.[0]||'')}</div>`;

      card.innerHTML = `
        ${badge}
        <div class="imgwrap">${img}</div>
        <div class="title">${p.name}</div>
        <div class="meta"><span>SKU: ${p.sku}</span></div>
        <div class="price">${money(p.price)}</div>
        <div class="btns">
          <button class="btn add">‚ûï Aggiungi al carrello</button>
          <a class="btn wa" href="https://wa.me/3908119578844?text=${encodeURIComponent('Ciao Re Long, vorrei info su '+p.name+' (SKU '+p.sku+').')}" target="_blank" rel="noopener">üí¨ WhatsApp</a>
          <button class="btn ghost copy">Copia dettagli</button>
        </div>
      `;

      // Handlers
      card.querySelector('.btn.add').onclick = ()=>{
        vibe(VIB_TAP);
        Cart.add({ sku:p.sku, name:p.name, price:p.price });
      };
      card.querySelector('.btn.copy').onclick = async ()=>{
        vibe(VIB_TAP);
        const t = `${p.name} ‚Äî ${money(p.price)} (SKU: ${p.sku})`;
        try{ await navigator.clipboard.writeText(t); toast('Dettagli copiati'); }catch{ toast(t); }
      };

      GRID.appendChild(card);
    });
    Cart.updatePill();
  }

  // ====== Filtri / Ricerca / Ordinamenti ======
  const q = $('#q');
  const brandChips = $('#brandChips');
  const sortChips  = $('#sortChips');
  let activeBrand = 'Tutti';
  let activeSort  = '';

  function getBrands(list){
    const set = new Set(list.map(x=>x.brand || 'Altro'));
    return ['Tutti', ...Array.from(set).sort((a,b)=> a.localeCompare(b,'it'))];
  }

  function makeBrandChips(){
    brandChips.innerHTML='';
    getBrands(PRODUCTS).forEach(b=>{
      const c = document.createElement('button');
      c.className = 'chip' + (b===activeBrand ? ' active' : '');
      c.textContent = b;
      c.onclick = ()=>{
        $$('.chip', brandChips).forEach(el=>el.classList.remove('active'));
        c.classList.add('active');
        activeBrand = b;
        applyFilters();
      };
      brandChips.appendChild(c);
    });
  }

  $$('.chip', sortChips).forEach(c=>{
    c.onclick = ()=>{
      $$('.chip', sortChips).forEach(el=>el.classList.remove('active'));
      c.classList.add('active');
      activeSort = c.dataset.sort || '';
      applyFilters();
    };
  });

  q.addEventListener('input', applyFilters);

  function applyFilters(){
    const term = q.value.trim().toLowerCase();
    let list = PRODUCTS.slice();

    if(activeBrand && activeBrand!=='Tutti'){
      list = list.filter(p=> (p.brand||'').toLowerCase() === activeBrand.toLowerCase());
    }
    if(term){
      list = list.filter(p=>
        p.name.toLowerCase().includes(term) ||
        (p.brand||'').toLowerCase().includes(term) ||
        (p.sku||'').toLowerCase().includes(term)
      );
    }
    if(activeSort==='name'){ list.sort((a,b)=> a.name.localeCompare(b.name,'it')); }
    if(activeSort==='price-asc'){ list.sort((a,b)=> a.price - b.price); }
    if(activeSort==='price-desc'){ list.sort((a,b)=> b.price - a.price); }

    render(list);
  }

  // ====== Init ======
  // Toast container
  (function ensureToast(){
    const t = document.createElement('div'); t.className='toast'; document.body.appendChild(t);
  })();

  // Load
  makeBrandChips();
  applyFilters();

  // Aggiorna pill se carrello cambia in un‚Äôaltra scheda
  window.addEventListener('storage', (e)=>{ if(e.key===LS_CART_KEY) Cart.updatePill(); });

  // Vibrazione su bottoni principali
  document.addEventListener('pointerdown', (e)=>{
    const el = e.target.closest('.btn, .chip, #cartSend, #cartClear');
    if(el) vibe(VIB_TAP);
  }, {passive:true});
  </script>

</body>
</html>
