<script>
/* Barra promo: SOLO Black Friday dal 7 nov ore 09:00 al 30 nov 23:59 (Europe/Rome) */
(function(){
  const bar   = document.getElementById('bfBar');
  const timer = document.getElementById('bfTimer');
  const label = document.getElementById('bfLabel');
  const inline = document.getElementById('bfInline'); // se non esiste, è ok
  if(!bar || !timer || !label) return;

  // ⬇️ IMPOSTA QUI LE DATE
  const BF_START = new Date('2025-11-07T09:00:00+01:00'); // domattina 09:00
  const BF_END   = new Date('2025-11-30T23:59:59+01:00'); // fino al 30 inclusivo

  function phase(now){
    if (now >= BF_START && now <= BF_END) {
      return { text:'BLACK FRIDAY', endsAt: BF_END, inline:true };
    }
    return null; // niente Cyber Monday
  }

  function tick(){
    const now = new Date();
    const ph = phase(now);
    if(!ph){
      bar.style.display = 'none';
      document.body.classList.remove('has-bf');
      if(inline) inline.style.display = 'none';
      return;
    }
    bar.style.display = 'flex';
    document.body.classList.add('has-bf');
    label.textContent = ph.text;
    if(inline) inline.style.display = ph.inline ? 'flex' : 'none';

    let diff = ph.endsAt - now;
    if (diff <= 0){ timer.textContent = 'ULTIME ORE!'; return; }
    const d = Math.floor(diff/86400000); diff -= d*86400000;
    const h = Math.floor(diff/3600000);  diff -= h*3600000;
    const m = Math.floor(diff/60000);    diff -= m*60000;
    const s = Math.floor(diff/1000);
    timer.textContent = `${String(d).padStart(2,'0')}g ${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
  }

  tick(); setInterval(tick, 1000);
})();
</script>
